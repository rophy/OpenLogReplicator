services:
  olr:
    image: olr-dev:${OLR_IMAGE_TAG:-latest}
    entrypoint: []
    command: ["sleep", "infinity"]
    volumes:
      - ../../..:/opt/OpenLogReplicator-local

  oracle:
    image: gvenzl/oracle-free:23-slim-faststart
    container_name: oracle
    ports:
      - "1521:1521"
    environment:
      ORACLE_PASSWORD: oracle
      APP_USER: olr_test
      APP_USER_PASSWORD: olr_test
    volumes:
      - ./oracle-init:/container-entrypoint-initdb.d
    healthcheck:
      test: ["CMD", "healthcheck.sh"]
      interval: 10s
      timeout: 5s
      retries: 30
